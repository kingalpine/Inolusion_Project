<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Incidents</title>
    <link rel="stylesheet" type="text/css" href="../static/css/Incidents_Table.css" th:href="@{/css/Incidents_Table.css}">
</head>
    <body>
		<div id="header">
		<div id="logo"></div>
        <ul id="nav">
			<li><a href="/">Home</a></li>
            <li><a href="/patient_records_table">Patient Records</a></li>
			<li><a href="/employee_records">Therapist Records</a></li>
            <li><a href="/therapy_session">Therapy Sessions</a></li>
			<li><a class="active" href="/incidents_table">Incidents</a></li>
            <li><a href="/reports">Reports</a></li>
		</ul>
		</div>
		<center><div class="row">
			<div onclick="location.href='/add_incident_form';">
				<div class="box">
					<img th:src="@{/images/add.png}" height="30" width="30"><h1>Add Incident</h1></div></div>
		</div></center>
		<center> <input style="text-align:center;" type="text" id="myInput" onkeyup="myFunction()" placeholder="Search by Incident Type" title="Type Incident Type"> </center>
		<center>
			<table id="myTable">
				<tr class="header">
					<th>Incident ID</th>
					<th>Incident Type</th>
					<th>Therapy Session ID</th>
					<th>Incident Status</th>
					<th>Modify</th>
					<th>Delete</th>
				</tr>
				<tr th:each="incident : ${incident_array}">
					<td th:text="${incident.getIncidentId()}">Incident ID</td>
					<td th:text="${incident.getTypeId()}">Type ID</td>
					<td th:text="${incident.getTherapyId()}">Therapy ID</td>
					<td th:text="${incident.getStatusId()}">Status ID</td>
					<td><a th:href="@{/modify_incident_form/{id} (id=${incident.getIncidentId()})}">Edit</a></td>
					<td><a th:href="@{/delete_incident_form/{id} (id=${incident.getIncidentId()})}">Delete</a></td>
				</tr>
			</table>
		</center>
		<script>
			function myFunction() {
				var input, filter, table, tr, td, i, txtValue;
				input = document.getElementById("myInput");
				filter = input.value.toUpperCase();
				table = document.getElementById("myTable");
				tr = table.getElementsByTagName("tr");
				for (i = 0; i < tr.length; i++) {
					td = tr[i].getElementsByTagName("td")[1];
					if (td) {
						txtValue = td.textContent || td.innerText;
						if (txtValue.toUpperCase().indexOf(filter) > -1) {
							tr[i].style.display = "";
						} else {
							tr[i].style.display = "none";
						}
					}
				}
			}
		</script>
	</body>
</html>